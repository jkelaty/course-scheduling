{"ast":null,"code":"import _classCallCheck from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Filters from'./Filters.jsx';import TimeTable from'./TimeTable.jsx';import DayTable from'./DayTable.jsx';import{CSSTransition}from'react-transition-group';import'./ScheduleViewer.scss';var ScheduleViewer=/*#__PURE__*/function(_React$Component){_inherits(ScheduleViewer,_React$Component);var _super=_createSuper(ScheduleViewer);function ScheduleViewer(props){var _this;_classCallCheck(this,ScheduleViewer);_this=_super.call(this,props);_this.schedule={};_this.data={subjects:{},courses:{},instructors:{},rooms:{},colors:{}};_this.parseSchedule(_this.props.schedule);_this.state={display_schedule:_this.getDisplaySchedule(),filters_active:false,filters:{subjects:{},courses:{},instructors:{},rooms:{}}};_this.callback=_this.changeFilters.bind(_assertThisInitialized(_this));return _this;}_createClass(ScheduleViewer,[{key:\"parseSchedule\",value:function parseSchedule(schedule_arr){for(var i=1;i<schedule_arr.length;++i){var subject=schedule_arr[i][0];var section=schedule_arr[i][1];if(section[0]!==' '){section=' '+section;}var course=subject+section;var days='';var days_string=String(schedule_arr[i][3]);var days_array={};while(days_string!==''){if(days_string[0]==='M'){days_array['Monday']=true;days_string=days_string.substring(1);days+=\"Mo, \";}else if(days_string[0]==='W'){days_array['Wednesday']=true;days_string=days_string.substring(1);days+=\"We, \";}else if(days_string[0]==='F'){days_array['Friday']=true;days_string=days_string.substring(1);days+=\"Fr, \";}else if(days_string.substring(0,2)==='TH'){days_array['Thursday']=true;days_string=days_string.substring(2);days+=\"Th, \";}else if(days_string[0]==='T'){days_array['Tuesday']=true;days_string=days_string.substring(1);days+=\"Tu, \";}else{break;}}if(days!==''){days=days.substring(0,days.length-2);}var times=schedule_arr[i][4];var time={start:{hour:12,minute:0},end:{hour:12,minute:0}};if(times){var duration=parseInt(schedule_arr[i][6]);var time_array=times.split(' ');var time_start=time_array[0].split(':');var time_end=time_array[0].split(':');var time_period=time_array[1];for(var j=0;j<time_start.length;++j){time_start[j]=parseInt(time_start[j]);time_end[j]=parseInt(time_end[j]);}if(time_period==='PM'&&time_start[0]!==12){time_start[0]+=12;time_end[0]+=12;}time_end[0]+=parseInt(duration/60);time_end[1]+=duration%60;time_end[0]+=parseInt(time_end[1]/60);time_end[1]%=60;time['start']['hour']=time_start[0];time['start']['minute']=time_start[1];time['end']['hour']=time_end[0];time['end']['minute']=time_end[1];times+=' - ';if(time['end']['hour']>12){times+=time['end']['hour']-12;}else{times+=time['end']['hour'];}if(time['end']['minute']<10){times+=':0';}else{times+=':';}times+=time['end']['minute'];if(time['end']['hour']>=12){times+=' PM';}else{times+=' AM';}}var instructor=schedule_arr[i][5];var room=schedule_arr[i][2];var color='';if(subject in this.data.colors){color=this.data.colors[subject];}else{while(color.length<7){color='#'+Math.floor(Math.random()*16777215).toString(16);}this.data.colors[subject]=color;}this.schedule[course]={};this.schedule[course]['course']=course;this.schedule[course]['subject']=subject;this.schedule[course]['section']=section;this.schedule[course]['days']=days_array;this.schedule[course]['time']=time;this.schedule[course]['room']=room;this.schedule[course]['instructor']=instructor;this.schedule[course]['color']=color;this.schedule[course]['days_f']=days;this.schedule[course]['time_f']=times;this.data.subjects[subject]=true;this.data.courses[course]=true;this.data.instructors[instructor]=true;this.data.rooms[room]=true;}}},{key:\"getDisplaySchedule\",value:function getDisplaySchedule(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var display_schedule={Monday:{},Tuesday:{},Wednesday:{},Thursday:{},Friday:{}};for(var course in this.schedule){for(var day in display_schedule){if(day in this.schedule[course]['days']){if(filters&&this.validFilters(filters)){if(this.schedule[course]['subject']in filters.subjects||this.schedule[course]['course']in filters.courses||this.schedule[course]['instructor']in filters.instructors||this.schedule[course]['room']in filters.rooms){display_schedule[day][course]=true;}}else{display_schedule[day][course]=true;}}}}return display_schedule;}},{key:\"validFilters\",value:function validFilters(filters){for(var type in filters){if(!window.$.isEmptyObject(filters[type])){return true;}}return false;}},{key:\"openFilters\",value:function openFilters(){this.setState({filters_active:!this.state.filters_active});}},{key:\"changeFilters\",value:function changeFilters(new_filters){this.setState({display_schedule:this.getDisplaySchedule(new_filters),filters_active:false,filters:new_filters});}},{key:\"render\",value:function render(){var _this2=this;if(this.state.display_schedule){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cs-table-header-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cs-timetable-header\"},/*#__PURE__*/React.createElement(\"a\",{className:\"cs-table-filter\",href:\"#/\",onClick:function onClick(){return _this2.openFilters();}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-filter\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Monday    \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Tuesday   \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Wednesday \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Thursday  \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Friday    \"),/*#__PURE__*/React.createElement(CSSTransition,{appear:true,timeout:300,in:this.state.filters_active},/*#__PURE__*/React.createElement(Filters,{data:this.data,callback:this.callback}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-table-wrapper\"},/*#__PURE__*/React.createElement(TimeTable,null),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Monday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Tuesday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Wednesday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Thursday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Friday'})));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,\" \");}}}]);return ScheduleViewer;}(React.Component);export{ScheduleViewer as default};","map":{"version":3,"sources":["/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/ScheduleViewer/ScheduleViewer.jsx"],"names":["React","Filters","TimeTable","DayTable","CSSTransition","ScheduleViewer","props","schedule","data","subjects","courses","instructors","rooms","colors","parseSchedule","state","display_schedule","getDisplaySchedule","filters_active","filters","callback","changeFilters","bind","schedule_arr","i","length","subject","section","course","days","days_string","String","days_array","substring","times","time","start","hour","minute","end","duration","parseInt","time_array","split","time_start","time_end","time_period","j","instructor","room","color","Math","floor","random","toString","Monday","Tuesday","Wednesday","Thursday","Friday","day","validFilters","type","window","$","isEmptyObject","setState","new_filters","openFilters","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Filters from './Filters.jsx';\nimport TimeTable from './TimeTable.jsx';\nimport DayTable from './DayTable.jsx';\n\nimport { CSSTransition } from 'react-transition-group';\n\nimport './ScheduleViewer.scss';\n\n\nexport default class ScheduleViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.schedule = {};\n\n        this.data = {\n            subjects:    {},\n            courses:     {},\n            instructors: {},\n            rooms:       {},\n            colors:      {}\n        };\n\n        this.parseSchedule(this.props.schedule);\n\n        this.state = {\n            display_schedule : this.getDisplaySchedule(),\n            filters_active: false,\n            filters: {\n                subjects:    {},\n                courses:     {},\n                instructors: {},\n                rooms:       {}\n            }\n        };\n\n        this.callback = this.changeFilters.bind(this);\n    }\n\n    parseSchedule(schedule_arr) {\n        for (let i = 1; i < schedule_arr.length; ++i) {\n            let subject = schedule_arr[i][0];\n            let section = schedule_arr[i][1]\n\n            if ( section[0] !== ' ' ) {\n                section = ' ' + section;\n            }\n\n            let course = subject + section;\n\n            let days        = '';\n            let days_string = String(schedule_arr[i][3]);\n            var days_array  = {}\n\n            while ( days_string !== '' ) {\n                if ( days_string[0] === 'M' ) {\n                    days_array['Monday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Mo, \";\n                }\n                else if ( days_string[0] === 'W' ) {\n                    days_array['Wednesday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"We, \";\n                }\n                else if ( days_string[0] === 'F' ) {\n                    days_array['Friday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Fr, \";\n                }\n                else if ( days_string.substring(0,2) === 'TH' ) {\n                    days_array['Thursday'] = true;\n                    days_string = days_string.substring(2);\n                    days += \"Th, \";\n                }\n                else if ( days_string[0] === 'T' ) {\n                    days_array['Tuesday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Tu, \";\n                }\n                else {\n                    break;\n                }\n            }\n\n            if ( days !== '' ) {\n                days = days.substring(0, days.length - 2);\n            }\n\n            let times = schedule_arr[i][4];\n\n            var time = {\n                start: {\n                    hour: 12,\n                    minute: 0\n                },\n                end: {\n                    hour: 12,\n                    minute: 0\n                }\n            };\n\n            if ( times ) {\n                let duration    = parseInt(schedule_arr[i][6]);\n                let time_array  = times.split(' ');\n                let time_start  = time_array[0].split(':');\n                let time_end    = time_array[0].split(':');\n                let time_period = time_array[1];\n\n                for (let j = 0; j < time_start.length; ++j) {\n                    time_start[j] = parseInt( time_start[j] );\n                    time_end[j]   = parseInt( time_end[j]   );\n                }\n\n                if ( time_period === 'PM' && time_start[0] !== 12 ) {\n                    time_start[0] += 12;\n                    time_end[0]   += 12;\n                }\n\n                time_end[0] += parseInt(duration / 60);\n                time_end[1] += duration % 60;\n                time_end[0] += parseInt(time_end[1] / 60);\n                time_end[1] %= 60\n\n                time['start']['hour']   = time_start[0];\n                time['start']['minute'] = time_start[1];\n                time['end']['hour']     = time_end[0];\n                time['end']['minute']   = time_end[1];\n\n                times += ' - ';\n\n                if ( time['end']['hour'] > 12 ) {\n                    times += (time['end']['hour'] - 12);\n                }\n                else {\n                    times += time['end']['hour'];\n                }\n                \n                if ( time['end']['minute'] < 10 ) {\n                    times += ':0';\n                }\n                else {\n                    times += ':';\n                }\n\n                times += time['end']['minute'];\n\n                if ( time['end']['hour'] >= 12 ) {\n                    times += ' PM';\n                }\n                else {\n                    times += ' AM';\n                }\n            }\n\n            let instructor = schedule_arr[i][5];\n            let room       = schedule_arr[i][2];\n            let color      = '';\n\n            if ( subject in this.data.colors ) {\n                color = this.data.colors[subject];\n            }\n            else {\n                while ( color.length < 7 ) {\n                    color = '#' + Math.floor(Math.random()*16777215).toString(16);\n                }\n                this.data.colors[subject] = color;\n            }\n\n            this.schedule[course]               = {};\n            this.schedule[course]['course']     = course;\n            this.schedule[course]['subject']    = subject;\n            this.schedule[course]['section']    = section;\n            this.schedule[course]['days']       = days_array;\n            this.schedule[course]['time']       = time;\n            this.schedule[course]['room']       = room;\n            this.schedule[course]['instructor'] = instructor;\n            this.schedule[course]['color']      = color;\n            this.schedule[course]['days_f']     = days;\n            this.schedule[course]['time_f']     = times;\n\n            this.data.subjects[subject]       = true;\n            this.data.courses[course]         = true;\n            this.data.instructors[instructor] = true;\n            this.data.rooms[room]             = true;\n        }\n    }\n\n    getDisplaySchedule(filters = null) {\n        var display_schedule = {\n            Monday:    {},\n            Tuesday:   {},\n            Wednesday: {},\n            Thursday:  {},\n            Friday:    {}\n        };\n\n        for (var course in this.schedule) {\n            for (var day in display_schedule) {\n                if ( day in this.schedule[course]['days'] ) {\n                    if ( filters && this.validFilters(filters) ) {\n                        if ( this.schedule[course]['subject']    in filters.subjects    ||\n                             this.schedule[course]['course']     in filters.courses     ||\n                             this.schedule[course]['instructor'] in filters.instructors ||\n                             this.schedule[course]['room']       in filters.rooms\n                        ) {\n                            display_schedule[day][course] = true;\n                        }\n                    }\n                    else {\n                        display_schedule[day][course] = true;\n                    }\n                }\n            }\n        }\n\n        return display_schedule;\n    }\n\n    validFilters(filters) {\n        for (var type in filters) {\n            if ( ! window.$.isEmptyObject(filters[type]) ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    openFilters() {\n        this.setState({\n            filters_active: ! this.state.filters_active\n        });\n    }\n\n    changeFilters(new_filters) {\n        this.setState({\n            display_schedule: this.getDisplaySchedule(new_filters),\n            filters_active: false,\n            filters: new_filters\n        });\n    }\n\n    render() {\n        if ( this.state.display_schedule ) {\n            return (\n                <>\n                    <div className=\"cs-table-header-wrapper\">\n                        <div className=\"cs-timetable-header\">\n                            <a className=\"cs-table-filter\" href=\"#/\" onClick={() => this.openFilters()}>\n                                <i className=\"fas fa-filter\"></i>\n                            </a>\n                        </div>\n                        \n                        <div className=\"cs-daytable-header\">Monday    </div>\n                        <div className=\"cs-daytable-header\">Tuesday   </div>\n                        <div className=\"cs-daytable-header\">Wednesday </div>\n                        <div className=\"cs-daytable-header\">Thursday  </div>\n                        <div className=\"cs-daytable-header\">Friday    </div>\n\n                        <CSSTransition\n                            appear  = {true}\n                            timeout = {300}\n                            in      = {this.state.filters_active} >\n\n                            <Filters\n                                data     = {this.data}\n                                callback = {this.callback} />\n                        \n                        </CSSTransition>\n                    </div>\n\n                    <div className=\"cs-table-wrapper\">\n                        <TimeTable />\n\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Monday'}    />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Tuesday'}   />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Wednesday'} />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Thursday'}  />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Friday'}    />\n                    </div>\n                </>\n            );\n        }\n        else {\n            return ( <> </> );\n        }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}