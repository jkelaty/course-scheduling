{"ast":null,"code":"var _jsxFileName = \"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/ScheduleViewer/ScheduleViewer.jsx\";\nimport React from 'react';\nimport Filters from './Filters.jsx';\nimport TimeTable from './TimeTable.jsx';\nimport DayTable from './DayTable.jsx';\nimport { CSSTransition } from 'react-transition-group';\nimport './ScheduleViewer.scss';\nexport default class ScheduleViewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.schedule = {};\n    this.data = {\n      subjects: {},\n      courses: {},\n      instructors: {},\n      rooms: {},\n      colors: {}\n    };\n    this.parseSchedule(this.props.schedule);\n    this.state = {\n      display_schedule: this.getDisplaySchedule(),\n      filters_active: false,\n      filters_helper: true,\n      filters: {\n        subjects: {},\n        courses: {},\n        instructors: {},\n        rooms: {}\n      }\n    };\n    this.callback = this.changeFilters.bind(this);\n  }\n\n  parseSchedule(schedule_arr) {\n    for (let i = 1; i < schedule_arr.length; ++i) {\n      let subject = schedule_arr[i][0];\n      let section = schedule_arr[i][1];\n\n      if (section[0] !== ' ') {\n        section = ' ' + section;\n      }\n\n      let course = subject + section;\n      let days = '';\n      let days_string = String(schedule_arr[i][3]);\n      var days_array = {};\n\n      while (days_string !== '') {\n        if (days_string[0] === 'M') {\n          days_array['Monday'] = true;\n          days_string = days_string.substring(1);\n          days += \"Mo, \";\n        } else if (days_string[0] === 'W') {\n          days_array['Wednesday'] = true;\n          days_string = days_string.substring(1);\n          days += \"We, \";\n        } else if (days_string[0] === 'F') {\n          days_array['Friday'] = true;\n          days_string = days_string.substring(1);\n          days += \"Fr, \";\n        } else if (days_string.substring(0, 2) === 'TH') {\n          days_array['Thursday'] = true;\n          days_string = days_string.substring(2);\n          days += \"Th, \";\n        } else if (days_string[0] === 'T') {\n          days_array['Tuesday'] = true;\n          days_string = days_string.substring(1);\n          days += \"Tu, \";\n        } else {\n          break;\n        }\n      }\n\n      if (days !== '') {\n        days = days.substring(0, days.length - 2);\n      }\n\n      let times = schedule_arr[i][4];\n      var time = {\n        start: {\n          hour: 12,\n          minute: 0\n        },\n        end: {\n          hour: 12,\n          minute: 0\n        }\n      };\n\n      if (times) {\n        let duration = parseInt(schedule_arr[i][6]);\n        let time_array = times.split(' ');\n        let time_start = time_array[0].split(':');\n        let time_end = time_array[0].split(':');\n        let time_period = time_array[1];\n\n        for (let j = 0; j < time_start.length; ++j) {\n          time_start[j] = parseInt(time_start[j]);\n          time_end[j] = parseInt(time_end[j]);\n        }\n\n        if (time_period === 'PM' && time_start[0] !== 12) {\n          time_start[0] += 12;\n          time_end[0] += 12;\n        }\n\n        time_end[0] += parseInt(duration / 60);\n        time_end[1] += duration % 60;\n        time_end[0] += parseInt(time_end[1] / 60);\n        time_end[1] %= 60;\n        time['start']['hour'] = time_start[0];\n        time['start']['minute'] = time_start[1];\n        time['end']['hour'] = time_end[0];\n        time['end']['minute'] = time_end[1];\n        times += ' - ';\n\n        if (time['end']['hour'] > 12) {\n          times += time['end']['hour'] - 12;\n        } else {\n          times += time['end']['hour'];\n        }\n\n        if (time['end']['minute'] < 10) {\n          times += ':0';\n        } else {\n          times += ':';\n        }\n\n        times += time['end']['minute'];\n\n        if (time['end']['hour'] >= 12) {\n          times += ' PM';\n        } else {\n          times += ' AM';\n        }\n      }\n\n      let instructor = schedule_arr[i][5];\n      let room = schedule_arr[i][2];\n      let color = '';\n\n      if (subject in this.data.colors) {\n        color = this.data.colors[subject];\n      } else {\n        while (color.length < 7) {\n          color = '#' + Math.floor(Math.random() * 16777215).toString(16);\n        }\n\n        this.data.colors[subject] = color;\n      }\n\n      this.schedule[course] = {};\n      this.schedule[course]['course'] = course;\n      this.schedule[course]['subject'] = subject;\n      this.schedule[course]['section'] = section;\n      this.schedule[course]['days'] = days_array;\n      this.schedule[course]['time'] = time;\n      this.schedule[course]['room'] = room;\n      this.schedule[course]['instructor'] = instructor;\n      this.schedule[course]['color'] = color;\n      this.schedule[course]['days_f'] = days;\n      this.schedule[course]['time_f'] = times;\n      this.data.subjects[subject] = true;\n      this.data.courses[course] = true;\n      this.data.instructors[instructor] = true;\n      this.data.rooms[room] = true;\n    }\n  }\n\n  getDisplaySchedule(filters = null) {\n    var display_schedule = {\n      Monday: {},\n      Tuesday: {},\n      Wednesday: {},\n      Thursday: {},\n      Friday: {}\n    };\n\n    for (var course in this.schedule) {\n      for (var day in display_schedule) {\n        if (day in this.schedule[course]['days']) {\n          if (filters && this.validFilters(filters)) {\n            if (this.schedule[course]['subject'] in filters.subjects || this.schedule[course]['course'] in filters.courses || this.schedule[course]['instructor'] in filters.instructors || this.schedule[course]['room'] in filters.rooms) {\n              display_schedule[day][course] = true;\n            }\n          } else {\n            display_schedule[day][course] = true;\n          }\n        }\n      }\n    }\n\n    return display_schedule;\n  }\n\n  validFilters(filters) {\n    for (var type in filters) {\n      if (Object.keys(filters[type]).length !== 0) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  openFilters() {\n    this.setState({\n      filters_active: !this.state.filters_active,\n      filters_helper: false\n    });\n  }\n\n  changeFilters(new_filters) {\n    this.setState({\n      display_schedule: this.getDisplaySchedule(new_filters),\n      filters_active: false,\n      filters: new_filters\n    });\n  }\n\n  render() {\n    if (this.state.display_schedule) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-table-header-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-timetable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 25\n        }\n      }, this.state.filters_helper ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-arrow-down cs-filters-arrow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 33\n        }\n      }) : null, /*#__PURE__*/React.createElement(\"a\", {\n        title: \"Filters\",\n        className: \"cs-table-filter\",\n        href: \"#/\",\n        onClick: () => this.openFilters(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-filter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-daytable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }\n      }, \"Monday    \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-daytable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 25\n        }\n      }, \"Tuesday   \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-daytable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 25\n        }\n      }, \"Wednesday \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-daytable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 25\n        }\n      }, \"Thursday  \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-daytable-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }\n      }, \"Friday    \"), /*#__PURE__*/React.createElement(CSSTransition, {\n        appear: true,\n        timeout: 300,\n        in: this.state.filters_active,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Filters, {\n        data: this.data,\n        callback: this.callback,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 29\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cs-table-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TimeTable, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(DayTable, {\n        schedule: this.schedule,\n        display: this.state.display_schedule,\n        day: 'Monday',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(DayTable, {\n        schedule: this.schedule,\n        display: this.state.display_schedule,\n        day: 'Tuesday',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(DayTable, {\n        schedule: this.schedule,\n        display: this.state.display_schedule,\n        day: 'Wednesday',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(DayTable, {\n        schedule: this.schedule,\n        display: this.state.display_schedule,\n        day: 'Thursday',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(DayTable, {\n        schedule: this.schedule,\n        display: this.state.display_schedule,\n        day: 'Friday',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }\n      })));\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, \" \");\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/ScheduleViewer/ScheduleViewer.jsx"],"names":["React","Filters","TimeTable","DayTable","CSSTransition","ScheduleViewer","Component","constructor","props","schedule","data","subjects","courses","instructors","rooms","colors","parseSchedule","state","display_schedule","getDisplaySchedule","filters_active","filters_helper","filters","callback","changeFilters","bind","schedule_arr","i","length","subject","section","course","days","days_string","String","days_array","substring","times","time","start","hour","minute","end","duration","parseInt","time_array","split","time_start","time_end","time_period","j","instructor","room","color","Math","floor","random","toString","Monday","Tuesday","Wednesday","Thursday","Friday","day","validFilters","type","Object","keys","openFilters","setState","new_filters","render"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Filters from './Filters.jsx';\nimport TimeTable from './TimeTable.jsx';\nimport DayTable from './DayTable.jsx';\n\nimport { CSSTransition } from 'react-transition-group';\n\nimport './ScheduleViewer.scss';\n\n\nexport default class ScheduleViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.schedule = {};\n\n        this.data = {\n            subjects:    {},\n            courses:     {},\n            instructors: {},\n            rooms:       {},\n            colors:      {}\n        };\n\n        this.parseSchedule(this.props.schedule);\n\n        this.state = {\n            display_schedule : this.getDisplaySchedule(),\n            filters_active: false,\n            filters_helper: true,\n            filters: {\n                subjects:    {},\n                courses:     {},\n                instructors: {},\n                rooms:       {}\n            }\n        };\n\n        this.callback = this.changeFilters.bind(this);\n    }\n\n    parseSchedule(schedule_arr) {\n        for (let i = 1; i < schedule_arr.length; ++i) {\n            let subject = schedule_arr[i][0];\n            let section = schedule_arr[i][1]\n\n            if ( section[0] !== ' ' ) {\n                section = ' ' + section;\n            }\n\n            let course = subject + section;\n\n            let days        = '';\n            let days_string = String(schedule_arr[i][3]);\n            var days_array  = {}\n\n            while ( days_string !== '' ) {\n                if ( days_string[0] === 'M' ) {\n                    days_array['Monday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Mo, \";\n                }\n                else if ( days_string[0] === 'W' ) {\n                    days_array['Wednesday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"We, \";\n                }\n                else if ( days_string[0] === 'F' ) {\n                    days_array['Friday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Fr, \";\n                }\n                else if ( days_string.substring(0,2) === 'TH' ) {\n                    days_array['Thursday'] = true;\n                    days_string = days_string.substring(2);\n                    days += \"Th, \";\n                }\n                else if ( days_string[0] === 'T' ) {\n                    days_array['Tuesday'] = true;\n                    days_string = days_string.substring(1);\n                    days += \"Tu, \";\n                }\n                else {\n                    break;\n                }\n            }\n\n            if ( days !== '' ) {\n                days = days.substring(0, days.length - 2);\n            }\n\n            let times = schedule_arr[i][4];\n\n            var time = {\n                start: {\n                    hour: 12,\n                    minute: 0\n                },\n                end: {\n                    hour: 12,\n                    minute: 0\n                }\n            };\n\n            if ( times ) {\n                let duration    = parseInt(schedule_arr[i][6]);\n                let time_array  = times.split(' ');\n                let time_start  = time_array[0].split(':');\n                let time_end    = time_array[0].split(':');\n                let time_period = time_array[1];\n\n                for (let j = 0; j < time_start.length; ++j) {\n                    time_start[j] = parseInt( time_start[j] );\n                    time_end[j]   = parseInt( time_end[j]   );\n                }\n\n                if ( time_period === 'PM' && time_start[0] !== 12 ) {\n                    time_start[0] += 12;\n                    time_end[0]   += 12;\n                }\n\n                time_end[0] += parseInt(duration / 60);\n                time_end[1] += duration % 60;\n                time_end[0] += parseInt(time_end[1] / 60);\n                time_end[1] %= 60\n\n                time['start']['hour']   = time_start[0];\n                time['start']['minute'] = time_start[1];\n                time['end']['hour']     = time_end[0];\n                time['end']['minute']   = time_end[1];\n\n                times += ' - ';\n\n                if ( time['end']['hour'] > 12 ) {\n                    times += (time['end']['hour'] - 12);\n                }\n                else {\n                    times += time['end']['hour'];\n                }\n                \n                if ( time['end']['minute'] < 10 ) {\n                    times += ':0';\n                }\n                else {\n                    times += ':';\n                }\n\n                times += time['end']['minute'];\n\n                if ( time['end']['hour'] >= 12 ) {\n                    times += ' PM';\n                }\n                else {\n                    times += ' AM';\n                }\n            }\n\n            let instructor = schedule_arr[i][5];\n            let room       = schedule_arr[i][2];\n            let color      = '';\n\n            if ( subject in this.data.colors ) {\n                color = this.data.colors[subject];\n            }\n            else {\n                while ( color.length < 7 ) {\n                    color = '#' + Math.floor(Math.random()*16777215).toString(16);\n                }\n                this.data.colors[subject] = color;\n            }\n\n            this.schedule[course]               = {};\n            this.schedule[course]['course']     = course;\n            this.schedule[course]['subject']    = subject;\n            this.schedule[course]['section']    = section;\n            this.schedule[course]['days']       = days_array;\n            this.schedule[course]['time']       = time;\n            this.schedule[course]['room']       = room;\n            this.schedule[course]['instructor'] = instructor;\n            this.schedule[course]['color']      = color;\n            this.schedule[course]['days_f']     = days;\n            this.schedule[course]['time_f']     = times;\n\n            this.data.subjects[subject]       = true;\n            this.data.courses[course]         = true;\n            this.data.instructors[instructor] = true;\n            this.data.rooms[room]             = true;\n        }\n    }\n\n    getDisplaySchedule(filters = null) {\n        var display_schedule = {\n            Monday:    {},\n            Tuesday:   {},\n            Wednesday: {},\n            Thursday:  {},\n            Friday:    {}\n        };\n\n        for (var course in this.schedule) {\n            for (var day in display_schedule) {\n                if ( day in this.schedule[course]['days'] ) {\n                    if ( filters && this.validFilters(filters) ) {\n                        if ( this.schedule[course]['subject']    in filters.subjects    ||\n                             this.schedule[course]['course']     in filters.courses     ||\n                             this.schedule[course]['instructor'] in filters.instructors ||\n                             this.schedule[course]['room']       in filters.rooms\n                        ) {\n                            display_schedule[day][course] = true;\n                        }\n                    }\n                    else {\n                        display_schedule[day][course] = true;\n                    }\n                }\n            }\n        }\n\n        return display_schedule;\n    }\n\n    validFilters(filters) {\n        for (var type in filters) {\n            if ( Object.keys(filters[type]).length !== 0 ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    openFilters() {\n        this.setState({\n            filters_active: ! this.state.filters_active,\n            filters_helper: false\n        });\n    }\n\n    changeFilters(new_filters) {\n        this.setState({\n            display_schedule: this.getDisplaySchedule(new_filters),\n            filters_active: false,\n            filters: new_filters\n        });\n    }\n\n    render() {\n        if ( this.state.display_schedule ) {\n            return (\n                <>\n                    <div className=\"cs-table-header-wrapper\">\n                        <div className=\"cs-timetable-header\">\n\n                            {this.state.filters_helper ? \n                                <i className=\"fas fa-arrow-down cs-filters-arrow\"></i>\n                            :\n                                null\n                            }\n\n                            <a title=\"Filters\" className=\"cs-table-filter\" href=\"#/\" onClick={() => this.openFilters()}>\n                                <i className=\"fas fa-filter\"></i>\n                            </a>\n                        </div>\n                        \n                        <div className=\"cs-daytable-header\">Monday    </div>\n                        <div className=\"cs-daytable-header\">Tuesday   </div>\n                        <div className=\"cs-daytable-header\">Wednesday </div>\n                        <div className=\"cs-daytable-header\">Thursday  </div>\n                        <div className=\"cs-daytable-header\">Friday    </div>\n\n                        <CSSTransition\n                            appear  = {true}\n                            timeout = {300}\n                            in      = {this.state.filters_active} >\n\n                            <Filters\n                                data     = {this.data}\n                                callback = {this.callback} />\n                        \n                        </CSSTransition>\n                    </div>\n\n                    <div className=\"cs-table-wrapper\">\n                        <TimeTable />\n\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Monday'}    />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Tuesday'}   />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Wednesday'} />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Thursday'}  />\n                        <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Friday'}    />\n                    </div>\n                </>\n            );\n        }\n        else {\n            return ( <> </> );\n        }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}