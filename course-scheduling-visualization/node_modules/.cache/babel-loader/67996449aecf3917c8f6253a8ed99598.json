{"ast":null,"code":"import _classCallCheck from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Filters from'./Filters.jsx';import TimeTable from'./TimeTable.jsx';import DayTable from'./DayTable.jsx';import{CSSTransition}from'react-transition-group';import'./ScheduleViewer.scss';var ScheduleViewer=/*#__PURE__*/function(_React$Component){_inherits(ScheduleViewer,_React$Component);var _super=_createSuper(ScheduleViewer);function ScheduleViewer(props){var _this;_classCallCheck(this,ScheduleViewer);_this=_super.call(this,props);_this.schedule=null;_this.colors=null;_this.callback=_this.changeFilters.bind(_assertThisInitialized(_this));_this.state={display_schedule:null,filters_active:false,filters:null};return _this;}_createClass(ScheduleViewer,[{key:\"componentDidMount\",value:function componentDidMount(){this.parseSchedule(this.props.schedule);this.setState({display_schedule:this.getDisplaySchedule()});}},{key:\"parseSchedule\",value:function parseSchedule(schedule_arr){var colors={};var schedule={};for(var i=1;i<schedule_arr.length;++i){var subject=schedule_arr[i][0];var section=schedule_arr[i][1];if(section[0]!==' '){section=' '+section;}var course=subject+section;var days=schedule_arr[i][3];var days_string=String(days);var days_array={};while(days_string!==''){if(days_string[0]==='M'){days_array['Monday']=true;days_string=days_string.substring(1);}else if(days_string[0]==='W'){days_array['Wednesday']=true;days_string=days_string.substring(1);}else if(days_string[0]==='F'){days_array['Friday']=true;days_string=days_string.substring(1);}else if(days_string.substring(0,2)==='TH'){days_array['Thursday']=true;days_string=days_string.substring(2);}else if(days_string[0]==='T'){days_array['Tuesday']=true;days_string=days_string.substring(1);}else{break;}}var times=schedule_arr[i][4];var time={start:{hour:12,minute:0},end:{hour:12,minute:0}};if(times){var duration=parseInt(schedule_arr[i][6]);var time_array=times.split(' ');var time_start=time_array[0].split(':');var time_end=time_array[0].split(':');var time_period=time_array[1];for(var j=0;j<time_start.length;++j){time_start[j]=parseInt(time_start[j]);time_end[j]=parseInt(time_end[j]);}if(time_period==='PM'&&time_start[0]!==12){time_start[0]+=12;time_end[0]+=12;}time_end[0]+=parseInt(duration/60);time_end[1]+=duration%60;time_end[0]+=parseInt(time_end[1]/60);time_end[1]%=60;time['start']['hour']=time_start[0];time['start']['minute']=time_start[1];time['end']['hour']=time_end[0];time['end']['minute']=time_end[1];times+=' - ';if(time['end']['hour']>12){times+=time['end']['hour']-12;}else{times+=time['end']['hour'];}if(time['end']['minute']<10){times+=':0';}else{times+=':';}times+=time['end']['minute'];if(time['end']['hour']>=12){times+=' PM';}else{times+=' AM';}}var color='#'+Math.floor(Math.random()*16777215).toString(16);while(color.length<7){color='#'+Math.floor(Math.random()*16777215).toString(16);}if(subject in colors){color=colors[subject];}schedule[course]={};schedule[course]['course']=course;schedule[course]['subject']=subject;schedule[course]['section']=section;schedule[course]['days']=days_array;schedule[course]['time']=time;schedule[course]['room']=schedule_arr[i][2];schedule[course]['instructor']=schedule_arr[i][5];schedule[course]['color']=color;schedule[course]['days_f']=days;schedule[course]['time_f']=times;}this.schedule=schedule;this.colors=colors;}},{key:\"getDisplaySchedule\",value:function getDisplaySchedule(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.state.filters;var display_schedule={Monday:{},Tuesday:{},Wednesday:{},Thursday:{},Friday:{}};for(var course in this.schedule){for(var day in display_schedule){if(day in this.schedule[course]['days']){display_schedule[day][course]=true;}}}return display_schedule;}},{key:\"openFilters\",value:function openFilters(){this.setState({filters_active:!this.state.filters_active});}},{key:\"changeFilters\",value:function changeFilters(new_filters){this.setState({display_schedule:this.getDisplaySchedule(new_filters),filters_active:false,filters:new_filters});}},{key:\"render\",value:function render(){var _this2=this;if(this.state.display_schedule){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cs-table-header-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cs-timetable-header\"},/*#__PURE__*/React.createElement(\"a\",{className:\"cs-table-filter\",href:\"#/\",onClick:function onClick(){return _this2.openFilters();}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-filter\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Monday    \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Tuesday   \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Wednesday \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Thursday  \"),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-daytable-header\"},\"Friday    \"),/*#__PURE__*/React.createElement(CSSTransition,{appear:true,timeout:300,in:this.state.filters_active},/*#__PURE__*/React.createElement(Filters,{filters:this.state.filters,callback:this.callback,schedule:this.schedule,colors:this.colors}))),/*#__PURE__*/React.createElement(\"div\",{className:\"cs-table-wrapper\"},/*#__PURE__*/React.createElement(TimeTable,null),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Monday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Tuesday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Wednesday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Thursday'}),/*#__PURE__*/React.createElement(DayTable,{schedule:this.schedule,display:this.state.display_schedule,day:'Friday'})));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,\" \");}}}]);return ScheduleViewer;}(React.Component);export{ScheduleViewer as default};","map":{"version":3,"sources":["/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/ScheduleViewer/ScheduleViewer.jsx"],"names":["React","Filters","TimeTable","DayTable","CSSTransition","ScheduleViewer","props","schedule","colors","callback","changeFilters","bind","state","display_schedule","filters_active","filters","parseSchedule","setState","getDisplaySchedule","schedule_arr","i","length","subject","section","course","days","days_string","String","days_array","substring","times","time","start","hour","minute","end","duration","parseInt","time_array","split","time_start","time_end","time_period","j","color","Math","floor","random","toString","Monday","Tuesday","Wednesday","Thursday","Friday","day","new_filters","openFilters","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Filters from './Filters.jsx';\nimport TimeTable from './TimeTable.jsx';\nimport DayTable from './DayTable.jsx';\n\nimport { CSSTransition } from 'react-transition-group';\n\nimport './ScheduleViewer.scss';\n\nexport default class ScheduleViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.schedule = null;\n        this.colors   = null;\n\n        this.callback = this.changeFilters.bind(this);\n\n        this.state = {\n            display_schedule : null,\n            filters_active: false,\n            filters: null\n        };\n    }\n\n    componentDidMount() {\n        this.parseSchedule(this.props.schedule);\n\n        this.setState({\n            display_schedule: this.getDisplaySchedule()\n        });\n    }\n\n    parseSchedule(schedule_arr) {\n        var colors   = {};\n        var schedule = {};\n\n        for (let i = 1; i < schedule_arr.length; ++i) {\n            let subject = schedule_arr[i][0];\n            let section = schedule_arr[i][1]\n\n            if ( section[0] !== ' ' ) {\n                section = ' ' + section;\n            }\n\n            let course = subject + section;\n\n            let days = schedule_arr[i][3];\n            let days_string = String(days);\n            var days_array  = {}\n\n            while ( days_string !== '' ) {\n                if ( days_string[0] === 'M' ) {\n                    days_array['Monday'] = true;\n                    days_string = days_string.substring(1);\n                }\n                else if ( days_string[0] === 'W' ) {\n                    days_array['Wednesday'] = true;\n                    days_string = days_string.substring(1);\n                }\n                else if ( days_string[0] === 'F' ) {\n                    days_array['Friday'] = true;\n                    days_string = days_string.substring(1);\n                }\n                else if ( days_string.substring(0,2) === 'TH' ) {\n                    days_array['Thursday'] = true;\n                    days_string = days_string.substring(2);\n                }\n                else if ( days_string[0] === 'T' ) {\n                    days_array['Tuesday'] = true;\n                    days_string = days_string.substring(1);\n                }\n                else {\n                    break;\n                }\n            }\n\n            let times = schedule_arr[i][4];\n\n            var time = {\n                start: {\n                    hour: 12,\n                    minute: 0\n                },\n                end: {\n                    hour: 12,\n                    minute: 0\n                }\n            };\n\n            if ( times ) {\n                let duration    = parseInt(schedule_arr[i][6]);\n                let time_array  = times.split(' ');\n                let time_start  = time_array[0].split(':');\n                let time_end    = time_array[0].split(':');\n                let time_period = time_array[1];\n\n                for (let j = 0; j < time_start.length; ++j) {\n                    time_start[j] = parseInt( time_start[j] );\n                    time_end[j]   = parseInt( time_end[j]   );\n                }\n\n                if ( time_period === 'PM' && time_start[0] !== 12 ) {\n                    time_start[0] += 12;\n                    time_end[0]   += 12;\n                }\n\n                time_end[0] += parseInt(duration / 60);\n                time_end[1] += duration % 60;\n                time_end[0] += parseInt(time_end[1] / 60);\n                time_end[1] %= 60\n\n                time['start']['hour']   = time_start[0];\n                time['start']['minute'] = time_start[1];\n                time['end']['hour']     = time_end[0];\n                time['end']['minute']   = time_end[1];\n\n                times += ' - ';\n\n                if ( time['end']['hour'] > 12 ) {\n                    times += (time['end']['hour'] - 12);\n                }\n                else {\n                    times += time['end']['hour'];\n                }\n                \n                if ( time['end']['minute'] < 10 ) {\n                    times += ':0';\n                }\n                else {\n                    times += ':';\n                }\n\n                times += time['end']['minute'];\n\n                if ( time['end']['hour'] >= 12 ) {\n                    times += ' PM';\n                }\n                else {\n                    times += ' AM';\n                }\n            }\n\n            let color = '#' + Math.floor(Math.random()*16777215).toString(16);\n\n            while ( color.length < 7 ) {\n                color = '#' + Math.floor(Math.random()*16777215).toString(16);\n            }\n\n            if ( subject in colors ) {\n                color = colors[subject];\n            }\n\n            schedule[course]               = {};\n            schedule[course]['course']     = course;\n            schedule[course]['subject']    = subject;\n            schedule[course]['section']    = section;\n            schedule[course]['days']       = days_array;\n            schedule[course]['time']       = time;\n            schedule[course]['room']       = schedule_arr[i][2];\n            schedule[course]['instructor'] = schedule_arr[i][5];\n            schedule[course]['color']      = color;\n            schedule[course]['days_f']     = days;\n            schedule[course]['time_f']     = times;\n        }\n\n        this.schedule = schedule;\n        this.colors   = colors;\n    }\n\n    getDisplaySchedule(filters = this.state.filters) {\n        var display_schedule = {\n            Monday:    {},\n            Tuesday:   {},\n            Wednesday: {},\n            Thursday:  {},\n            Friday:    {}\n        };\n\n        for (var course in this.schedule) {\n            for (var day in display_schedule) {\n                if ( day in this.schedule[course]['days'] ) {\n                    display_schedule[day][course] = true;\n                }\n            }\n        }\n\n        return display_schedule;\n    }\n\n    openFilters() {\n        this.setState({\n            filters_active: ! this.state.filters_active\n        });\n    }\n\n    changeFilters(new_filters) {\n        this.setState({\n            display_schedule: this.getDisplaySchedule(new_filters),\n            filters_active: false,\n            filters: new_filters\n        });\n    }\n\n    render() {\n        if ( this.state.display_schedule ) {\n            return (\n                <>\n                <div className=\"cs-table-header-wrapper\">\n                    <div className=\"cs-timetable-header\">\n                        <a className=\"cs-table-filter\" href=\"#/\" onClick={() => this.openFilters()}>\n                            <i className=\"fas fa-filter\"></i>\n                        </a>\n                    </div>\n                    \n                    <div className=\"cs-daytable-header\">Monday    </div>\n                    <div className=\"cs-daytable-header\">Tuesday   </div>\n                    <div className=\"cs-daytable-header\">Wednesday </div>\n                    <div className=\"cs-daytable-header\">Thursday  </div>\n                    <div className=\"cs-daytable-header\">Friday    </div>\n\n                    <CSSTransition\n                        appear  = {true}\n                        timeout = {300}\n                        in      = {this.state.filters_active} >\n\n                        <Filters\n                            filters  = {this.state.filters}\n                            callback = {this.callback}\n                            schedule = {this.schedule}\n                            colors   = {this.colors} />\n                    \n                    </CSSTransition>\n                </div>\n\n                <div className=\"cs-table-wrapper\">\n                    <TimeTable />\n\n                    <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Monday'}    />\n                    <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Tuesday'}   />\n                    <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Wednesday'} />\n                    <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Thursday'}  />\n                    <DayTable schedule={this.schedule} display={this.state.display_schedule} day={'Friday'}    />\n                </div>\n                </>\n            );\n        }\n        else {\n            return ( <> </> );\n        }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}