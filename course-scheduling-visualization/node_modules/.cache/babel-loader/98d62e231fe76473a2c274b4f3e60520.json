{"ast":null,"code":"var _jsxFileName = \"/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/Scheduler/Scheduler.jsx\";\nimport React from 'react';\nimport ScheduleViewer from '../ScheduleViewer/ScheduleViewer.jsx';\nimport PacmanLoad from 'react-spinners/PacmanLoader';\nimport './Scheduler.scss';\nexport default class Scheduler extends React.Component {\n  constructor(props) {\n    super(props);\n    this.courses_file = props.courses;\n    this.instructors_file = props.instructors;\n    this.courses = null;\n    this.instructors = null;\n    this.program = null;\n    this.state = {\n      // TODO: uncomment\n      schedule: null //schedule: true\n\n    };\n  }\n\n  componentDidMount() {\n    // TODO: uncomment\n    this.run_scheduler();\n  }\n\n  run_scheduler() {\n    let _this = this; //delete\n\n\n    console.log(_this.courses_file);\n\n    if (_this.courses_file) {\n      let courses_reader = new FileReader();\n\n      courses_reader.onload = function (e) {\n        _this.courses = courses_reader.result;\n\n        _this.received_file();\n      };\n\n      courses_reader.readAsText(_this.courses_file);\n    } else {// error...\n    }\n\n    if (_this.instructors_file) {\n      let instructors_reader = new FileReader();\n\n      instructors_reader.onload = function (e) {\n        _this.instructors = instructors_reader.result;\n\n        _this.received_file();\n      };\n\n      instructors_reader.readAsText(_this.instructors_file);\n    }\n  }\n\n  received_file() {\n    let _this = this; //delete\n\n\n    console.log(_this.courses);\n\n    if (_this.courses) {\n      if (!_this.instructors_file || _this.instructors_file && _this.instructors) {\n        window.jQuery.get('./main.py', function (program) {\n          let string_import = 'from six import StringIO\\n';\n          let courses_global = 'COURSES     = StringIO(\"\"\"' + _this.courses + '\"\"\")\\n';\n          let instructors_global = 'INSTRUCTORS = StringIO(\"\"\"' + _this.instructors + '\"\"\")\\n';\n          _this.program = string_import + courses_global + instructors_global + program;\n          window.languagePluginLoader.then(() => {\n            window.pyodide.loadPackage('pandas').then(() => {\n              _this.setState({\n                schedule: window.pyodide.runPython(_this.program)\n              });\n            });\n          });\n        });\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.state.schedule ? /*#__PURE__*/React.createElement(ScheduleViewer, {\n      schedule: this.state.schedule,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sv-loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(PacmanLoad, {\n      size: \"50px\",\n      color: \"white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/jkelaty/Desktop/course-scheduling/course-scheduling/src/CourseScheduling/Scheduler/Scheduler.jsx"],"names":["React","ScheduleViewer","PacmanLoad","Scheduler","Component","constructor","props","courses_file","courses","instructors_file","instructors","program","state","schedule","componentDidMount","run_scheduler","_this","console","log","courses_reader","FileReader","onload","e","result","received_file","readAsText","instructors_reader","window","jQuery","get","string_import","courses_global","instructors_global","languagePluginLoader","then","pyodide","loadPackage","setState","runPython","render"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport ScheduleViewer from '../ScheduleViewer/ScheduleViewer.jsx';\nimport PacmanLoad from 'react-spinners/PacmanLoader';\n\nimport './Scheduler.scss';\n\n\nexport default class Scheduler extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.courses_file     = props.courses;\n        this.instructors_file = props.instructors;\n\n        this.courses     = null;\n        this.instructors = null;\n        this.program     = null;\n\n        this.state = {\n            // TODO: uncomment\n            schedule: null\n            //schedule: true\n        };\n    }\n\n    componentDidMount() {\n        // TODO: uncomment\n        this.run_scheduler();\n    }\n\n    run_scheduler() {\n        let _this = this;\n        //delete\n        console.log(_this.courses_file);\n\n        if ( _this.courses_file ) {\n            let courses_reader = new FileReader();\n            courses_reader.onload = function(e) {\n                _this.courses = courses_reader.result;\n                _this.received_file();\n            }\n            courses_reader.readAsText( _this.courses_file );\n        }\n        else {\n            // error...\n        }\n\n        if ( _this.instructors_file ) {\n            let instructors_reader = new FileReader();\n            instructors_reader.onload = function(e) {\n                _this.instructors = instructors_reader.result;\n                _this.received_file();\n            }\n            instructors_reader.readAsText( _this.instructors_file );\n        }\n    }\n\n    received_file() {\n        let _this = this;\n        //delete\n        console.log(_this.courses);\n\n        if ( _this.courses ) {\n            if ( ! _this.instructors_file || (_this.instructors_file && _this.instructors) ) {\n                window.jQuery.get('./main.py', function(program) {\n\n                    let string_import      = 'from six import StringIO\\n';\n                    let courses_global     = 'COURSES     = StringIO(\"\"\"' + _this.courses     + '\"\"\")\\n';\n                    let instructors_global = 'INSTRUCTORS = StringIO(\"\"\"' + _this.instructors + '\"\"\")\\n';\n\n                    _this.program = string_import + courses_global + instructors_global + program;\n\n                    window.languagePluginLoader.then(() => {\n                        window.pyodide.loadPackage('pandas').then(() => {\n                            _this.setState({\n                                schedule: window.pyodide.runPython( _this.program )\n                            });\n                        });\n                    });\n                });\n            }\n        }\n    }\n\n    render() {\n        return (\n            <>\n                { this.state.schedule ?\n\n                    <ScheduleViewer schedule = {this.state.schedule} />\n\n                :\n\n                    <div className=\"sv-loading\">\n                        <PacmanLoad size='50px' color='white' />\n                    </div>\n                }\n            </>\n        );\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}